<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>journal</title>
  <link rel="stylesheet" href="../style/pulguijournal.css" />
  <link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap" rel="stylesheet">
</head>
<body>
  <div class="background-stars"></div>
  
  <!-- Sakura decorative elements -->
  <div class="sakura-decoration">
    <div class="floating-leaf">ï¿½</div>
    <div class="floating-leaf">ï¿½</div>
    <div class="floating-leaf">ï¿½</div>
    <div class="floating-leaf">ï¿½</div>
    <div class="floating-leaf">ï¿½</div>
    <div class="floating-leaf">ï¿½</div>
  </div>
  
  <!-- Corner decorations -->
  <div class="corner-decoration top-left">ï¿½</div>
  <div class="corner-decoration top-right">ï¿½</div>
  <div class="corner-decoration bottom-left">ï¿½</div>
  <div class="corner-decoration bottom-right">ï¿½</div>

  <header>
    <h2>journal</h2>
    <div class="header-controls">
      <button class="control-btn dashboard-btn" id="stats-btn" title="Dashboard de EstadÃ­sticas">ğŸ“Š</button>
      <button class="control-btn mosaic-btn" id="mosaic-btn" title="Vista Mosaico">ğŸ¨</button>
      <button class="control-btn today-btn" id="today-btn" title="En Este DÃ­a">ğŸ“…</button>
      <a href="journals.html" class="back-btn">â† volver</a>
    </div>
  </header>

<section class="diary">
  <h1 class="initials-title">P</h1>

  <!-- Statistics Dashboard -->
  <div class="stats-dashboard" id="stats-dashboard" style="display: none;">
    <div class="dashboard-header">
      <h3>ğŸ“Š Dashboard de Recuerdos</h3>
      <button class="close-dashboard" id="close-stats">Ã—</button>
    </div>
    <div class="stats-grid">
      <div class="stat-card total-memories">
        <div class="stat-icon">ğŸ“¸</div>
        <div class="stat-content">
          <div class="stat-number" id="total-photos">24</div>
          <div class="stat-label">Total de Recuerdos</div>
        </div>
      </div>
      <div class="stat-card total-notes">
        <div class="stat-icon">ğŸ’­</div>
        <div class="stat-content">
          <div class="stat-number" id="total-notes">0</div>
          <div class="stat-label">Notas Escritas</div>
        </div>
      </div>
      <div class="stat-card years-active">
        <div class="stat-icon">ğŸ—“ï¸</div>
        <div class="stat-content">
          <div class="stat-number" id="years-span">12</div>
          <div class="stat-label">AÃ±os de Recuerdos</div>
        </div>
      </div>
      <div class="stat-card most-noted">
        <div class="stat-icon">â­</div>
        <div class="stat-content">
          <div class="stat-number" id="most-noted-photo">-</div>
          <div class="stat-label">Recuerdo MÃ¡s Especial</div>
        </div>
      </div>
    </div>
    <div class="charts-section">
      <div class="chart-card">
        <h4>ğŸ“ˆ Recuerdos por AÃ±o</h4>
        <div class="year-chart" id="year-chart"></div>
      </div>
      <div class="chart-card">
        <h4>ğŸ  Lugares Favoritos</h4>
        <div class="places-chart" id="places-chart"></div>
      </div>
    </div>
    <div class="recent-activity">
      <h4>ğŸ•’ Actividad Reciente</h4>
      <div class="activity-list" id="activity-list"></div>
    </div>
  </div>

  <!-- On This Day Section -->
  <div class="on-this-day" id="on-this-day" style="display: none;">
    <div class="today-header">
      <h3>ğŸ“… En Este DÃ­a</h3>
      <button class="close-today" id="close-today">Ã—</button>
    </div>
    <div class="today-content" id="today-content">
      <!-- Will be populated by JavaScript -->
    </div>
  </div>

  <div class="timeline"></div> <!-- timeline -->

  <div class="view-controls">
    <button class="view-toggle active" data-view="grid" id="grid-view">ğŸ”² CuadrÃ­cula</button>
    <button class="view-toggle" data-view="mosaic" id="mosaic-view">ğŸ¨ Mosaico</button>
  </div>

  <div class="collage-grid" id="collage-grid">
    <!-- Se llena dinÃ¡micamente con JS -->
  </div>

  <!-- Mosaic Container -->
  <div class="mosaic-container" id="mosaic-container">
    <!-- Se llena dinÃ¡micamente con JS -->
  </div>
</section>


  <!-- Lightbox -->
  <div class="lightbox" id="lightbox">
    <span class="lightbox-close">&times;</span>
    <div class="lightbox-content">
      <img class="lightbox-img" id="lightbox-img" src="" alt="">
      <p class="lightbox-caption" id="lightbox-caption"></p>
      
      <!-- Memory Notes Section -->
      <div class="memory-notes-section">
        <div class="notes-header">
          <h4>ğŸ’­ Notas de este Recuerdo</h4>
          <button class="add-note-btn" id="add-note-btn">+ Agregar Nota</button>
        </div>
        <div class="notes-container" id="notes-container">
          <!-- Notes will be loaded here -->
        </div>
        <div class="add-note-form" id="add-note-form" style="display: none;">
          <textarea id="note-input" placeholder="Escribe tu recuerdo, pensamiento o sentimiento sobre esta foto..."></textarea>
          <div class="note-actions">
            <button class="save-note-btn" id="save-note-btn">ğŸ’¾ Guardar</button>
            <button class="cancel-note-btn" id="cancel-note-btn">âŒ Cancelar</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <script src="../js/pulguijournal.js"></script>
</body>
</html>
